---
title: List Locations
api: GET /api/external/v1/locations
description: "Retrieve dealer locations within your access scope"
---

# List Locations

Retrieve dealer locations within your partner access scope. Supports hierarchical queries and optional listing counts.

## Query Parameters

<ParamField query="parentId" type="string">
  Filter to locations under this parent profile UUID
</ParamField>

<ParamField query="includeChildren" type="boolean" default="true">
  Include child locations in results
</ParamField>

<ParamField query="withCounts" type="boolean" default="true">
  Include listing counts per location
</ParamField>

<ParamField query="search" type="string">
  Search by name, city, province, or location code
</ParamField>

## Response

<ResponseField name="data" type="array">
  Array of location objects

  <Expandable title="Location properties">
    <ResponseField name="id" type="string">
      Location profile UUID
    </ResponseField>
    <ResponseField name="parentId" type="string">
      Parent location UUID (null for root)
    </ResponseField>
    <ResponseField name="locationCode" type="string">
      Unique location code
    </ResponseField>
    <ResponseField name="companyName" type="string">
      Legal company name
    </ResponseField>
    <ResponseField name="displayName" type="string">
      Display name
    </ResponseField>
    <ResponseField name="email" type="string">
      Contact email
    </ResponseField>
    <ResponseField name="phone" type="string">
      Contact phone
    </ResponseField>
    <ResponseField name="address" type="string">
      Street address
    </ResponseField>
    <ResponseField name="postalCode" type="string">
      Postal code
    </ResponseField>
    <ResponseField name="city" type="string">
      City
    </ResponseField>
    <ResponseField name="province" type="string">
      Province
    </ResponseField>
    <ResponseField name="isRoot" type="boolean">
      True if this is a root/parent location
    </ResponseField>
    <ResponseField name="stats" type="object">
      Listing statistics (when withCounts=true)
    </ResponseField>
    <ResponseField name="children" type="array">
      Child locations (when includeChildren=true)
    </ResponseField>
  </Expandable>
</ResponseField>

<ResponseField name="meta" type="object">
  Request metadata including partner info
</ResponseField>

<RequestExample>
```bash cURL
curl -X GET "https://www.okasie.be/api/external/v1/locations?withCounts=true" \
  -H "Authorization: Bearer YOUR_API_SECRET"
```

```javascript Node.js
const response = await fetch(
  "https://www.okasie.be/api/external/v1/locations?withCounts=true",
  {
    headers: {
      Authorization: `Bearer ${process.env.PARTNER_SECRET}`,
    },
  }
);

const data = await response.json();
data.data.forEach(location => {
  console.log(`${location.displayName}: ${location.stats?.activeListings} listings`);
});
```
</RequestExample>

<ResponseExample>
```json Success
{
  "data": [
    {
      "id": "8f8f8f8f-8f8f-408f-a8f8-8f8f8f8f8f8f",
      "parentId": null,
      "locationCode": "DEX-HQ",
      "companyName": "DEX Belgium NV",
      "displayName": "DEX Belgium",
      "email": "info@dex.be",
      "phone": "+32 3 123 45 67",
      "address": "Hoofdstraat 1",
      "postalCode": "2000",
      "city": "Antwerpen",
      "province": "Antwerpen",
      "isRoot": true,
      "stats": {
        "activeListings": 250,
        "totalListings": 312
      },
      "children": [
        {
          "id": "7f7f7f7f-7f7f-407f-a7f7-7f7f7f7f7f7f",
          "parentId": "8f8f8f8f-8f8f-408f-a8f8-8f8f8f8f8f8f",
          "locationCode": "DEX-GENT",
          "companyName": "DEX Gent",
          "displayName": "DEX Gent",
          "city": "Gent",
          "stats": {
            "activeListings": 45,
            "totalListings": 52
          }
        }
      ]
    }
  ],
  "meta": {
    "total": 5,
    "partner": {
      "id": "partner-id",
      "name": "Partner Name"
    }
  }
}
```
</ResponseExample>

## Error Responses

| Status | Code | Description |
|--------|------|-------------|
| 401 | `UNAUTHORIZED` | Invalid or missing API key |
| 500 | `SERVER_ERROR` | Failed to load locations |
