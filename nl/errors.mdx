---
title: Foutcodes
description: "Referentie voor alle API-foutcodes en oplossingen"
---

# Foutcodes

Alle API-fouten retourneren een gestructureerd JSON-antwoord:

```json
{
  "error": {
    "code": "FOUT_CODE",
    "message": "Leesbare beschrijving van de fout"
  }
}
```

## Authenticatiefouten

| HTTP Status | Code | Beschrijving | Oplossing |
|-------------|------|--------------|-----------|
| 401 | `UNAUTHORIZED` | Ongeldige of ontbrekende API-sleutel | Controleer uw API-sleutel en Authorization header |
| 403 | `FORBIDDEN` | Geen toegang tot deze resource | Controleer uw profieltoegang |
| 403 | `SCOPE_DENIED` | Vereiste scope ontbreekt | Vraag de benodigde scope aan |

## Rate Limiting fouten

| HTTP Status | Code | Beschrijving | Oplossing |
|-------------|------|--------------|-----------|
| 429 | `RATE_LIMITED` | Te veel aanvragen | Wacht en probeer opnieuw met exponentiÃ«le backoff |

## Validatiefouten

| HTTP Status | Code | Beschrijving | Oplossing |
|-------------|------|--------------|-----------|
| 400 | `INVALID_JSON` | Ongeldige JSON in request body | Controleer JSON-syntax |
| 400 | `EMPTY_PAYLOAD` | Request body is leeg | Stuur geldige data |
| 400 | `TOO_MANY_ITEMS` | Meer dan 100 items in bulk operatie | Splits in kleinere batches |
| 400 | `INVALID_REFERENCE` | Ongeldige externe referentie | Gebruik geldige karakters |
| 422 | `VALIDATION_FAILED` | Veldvalidatie mislukt | Controleer verplichte velden en formats |

## Resourcefouten

| HTTP Status | Code | Beschrijving | Oplossing |
|-------------|------|--------------|-----------|
| 404 | `NOT_FOUND` | Resource niet gevonden | Controleer ID of referentie |
| 404 | `LISTING_NOT_FOUND` | Advertentie niet gevonden | Controleer externe referentie |
| 404 | `LOCATION_NOT_FOUND` | Locatie niet gevonden | Controleer locatie-ID of code |

## Profielfouten

| HTTP Status | Code | Beschrijving | Oplossing |
|-------------|------|--------------|-----------|
| 403 | `PROFILE_FORBIDDEN` | Geen toegang tot dit profiel | Controleer profieltoegang |
| 400 | `MISSING_DEALER` | Dealer-ID of locatiecode ontbreekt | Geef dealerProfileId of dealerLocationCode op |
| 400 | `INVALID_LOCATION_CODE` | Locatiecode niet gevonden | Controleer bestaande locatiecodes |

## Serverfouten

| HTTP Status | Code | Beschrijving | Oplossing |
|-------------|------|--------------|-----------|
| 500 | `SERVER_ERROR` | Interne serverfout | Probeer opnieuw; neem contact op bij aanhoudende problemen |
| 503 | `SERVICE_UNAVAILABLE` | Service tijdelijk niet beschikbaar | Probeer later opnieuw |

## Voorbeeld foutafhandeling

<CodeGroup>
```javascript Node.js
async function apiCall(endpoint, options = {}) {
  const response = await fetch(
    `https://www.okasie.be/api/external/v1${endpoint}`,
    {
      ...options,
      headers: {
        'Authorization': `Bearer ${process.env.PARTNER_SECRET}`,
        'Content-Type': 'application/json',
        ...options.headers
      }
    }
  );

  const data = await response.json();

  if (!response.ok) {
    const error = data.error || data;
    switch (error.code) {
      case 'RATE_LIMITED':
        // Wacht en probeer opnieuw
        await sleep(60000);
        return apiCall(endpoint, options);

      case 'VALIDATION_FAILED':
        console.error('Validatiefouten:', error.issues);
        throw new Error(`Validatie mislukt: ${error.message}`);

      default:
        throw new Error(`API fout: ${error.code} - ${error.message}`);
    }
  }

  return data;
}
```

```python Python
import time

def api_call(endpoint, method="GET", data=None):
    response = requests.request(
        method,
        f"https://www.okasie.be/api/external/v1{endpoint}",
        headers={"Authorization": f"Bearer {os.getenv('PARTNER_SECRET')}"},
        json=data
    )

    result = response.json()

    if not response.ok:
        error = result.get("error", result)
        code = error.get("code", "UNKNOWN")

        if code == "RATE_LIMITED":
            time.sleep(60)
            return api_call(endpoint, method, data)

        if code == "VALIDATION_FAILED":
            print(f"Validatiefouten: {error.get('issues', [])}")

        raise Exception(f"API fout: {code} - {error.get('message')}")

    return result
```
</CodeGroup>

## Bulk operatie fouten

Bij bulk upsert operaties worden fouten per item gerapporteerd:

```json
{
  "data": {
    "successCount": 98,
    "errorCount": 2,
    "results": [...],
    "errors": [
      {
        "index": 15,
        "externalReference": "REF-015",
        "code": "VALIDATION_FAILED",
        "message": "Validatie mislukt",
        "status": 422,
        "issues": [
          {"path": "price", "message": "Verplicht", "code": "invalid_type"}
        ]
      }
    ]
  }
}
```

<Tip>
  Voor bulk operaties mislukt niet de hele batch als individuele items fouten bevatten. Controleer altijd de `errors` array in het antwoord.
</Tip>
